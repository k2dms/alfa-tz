- name: Show current lv size (for logs)
  command: lvs --units g --noheadings -o lv_name,vg_name,lv_size
  register: lvs_before

- name: Extend logical volume by 1G
  lvol:
    vg: vgDATA
    lv: lv_data
    size: +1g

- name: Resize filesystem (ext4)
  command: resize2fs /dev/vgDATA/lv_data
  when: "'ext4' in ansible_facts.filesystem | default('') or true"

- name: Show lv size after extend
  command: lvs --units g --noheadings -o lv_name,vg_name,lv_size
  register: lvs_after
